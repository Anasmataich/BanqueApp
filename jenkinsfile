pipeline { 
    agent any   
    stages {
        stage('Checkout') {
            
            steps {
                git(
                    url: 'https://github.com/Anasmataich/BanqueApp.git',
                    branch: 'feature-virement',
                )
                
            }
        }
        stage('Run Tests') {
            steps {
                echo ' Lancement des tests unitaires avec Pytest...'
                bat '''
                pytest -v > test_results.txt
                type test_results.txt
                '''
            }
        }
        stage('run the app') {
            steps {
                bat 'python main.py --auto'
            }
        }

        stage('Run Tests') {
            steps {
                bat 'pytest -v'
            }
        }

    }
 }